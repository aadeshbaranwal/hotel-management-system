{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\project\\\\oxotel-au3\\\\oxotel\\\\src\\\\components\\\\Profile.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { updateProfile } from \"../api/api\";\nexport default function Profile() {\n  const [state, updateState] = useState({\n    edit: false,\n    firstname: \"\",\n    phoneNumber: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\"\n  });\n\n  const onEdit = () => {\n    if (!state.edit) {\n      updateState({ ...state,\n        edit: true\n      });\n    } else {\n      updateState({ ...state,\n        edit: false\n      });\n    }\n  };\n\n  const changeHandler = e => {\n    const {\n      name\n    } = e.target;\n    updateState({ ...state,\n      [name]: e.target.value\n    });\n  };\n\n  useEffect(() => {\n    if (localStorage.getItem(\"signupData\")) {\n      let name = JSON.parse(localStorage.getItem(\"signupData\")).name;\n      let phoneNumber = JSON.parse(localStorage.getItem(\"signupData\")).phoneNumber;\n      let password = JSON.parse(localStorage.getItem(\"signupData\")).password;\n      let email = JSON.parse(localStorage.getItem(\"signupData\")).email;\n      updateState({\n        name: name,\n        phoneNumber: phoneNumber,\n        password: password,\n        email: email\n      });\n    } else {\n      alert(\"User could not be created\");\n    }\n  }, []);\n\n  const handleSubmit = () => {\n    if (validityCheck()) {\n      const profileData = {\n        password: state.password,\n        name: state.name\n      };\n\n      try {\n        console.log(\"Profile Data\", JSON.stringify(profileData));\n        let username = JSON.parse(localStorage.getItem(\"signupData\")).username;\n        updateProfile(profileData, username); // window.location.reload();\n      } catch (e) {\n        console.log(e.message);\n      }\n    } else {\n      alert(\"Enter valid Details\");\n    }\n  };\n\n  const validityCheck = () => {\n    return state.name.length > 2 && state.password && state.confirmPassword && state.password === state.confirmPassword && checkPassword(state.password) && phoneNumber.length === 10;\n  };\n\n  const checkPassword = str => {\n    var re = /^(?=.*\\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/;\n    return re.test(str);\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"container shadow-sm p-3 mb-5  bg-white mt-5 fullH rounded border\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Profile\"), React.createElement(\"h5\", {\n    className: \"mb-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Basic info, for a faster booking experience\"), React.createElement(\"div\", {\n    className: \"mb-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"font-weight-bold\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"Edit Profile\", \" \", React.createElement(\"span\", {\n    onClick: onEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, \"\\u270E\")))), React.createElement(\"div\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }, !state.edit ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"h5\", {\n    className: \"d-inline pl-5 ml-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, state.name), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  }, \"Phone Number \"), React.createElement(\"h5\", {\n    className: \"d-inline pl-5 ml-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, state.phoneNumber), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, \"Email id\"), React.createElement(\"h5\", {\n    className: \"d-inline pl-5 ml-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, state.email), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"h5\", {\n    className: \"d-inline pl-5 ml-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"******\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }))) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, \"Name\"), React.createElement(\"input\", {\n    name: \"firstname\",\n    className: \"d-inline pl-5 ml-5\",\n    value: state.name,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Phone Number\"), React.createElement(\"input\", {\n    name: \"lastname\",\n    className: \"d-inline pl-5 ml-5\",\n    value: state.phoneNumber,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Email id\"), React.createElement(\"h5\", {\n    className: \"d-inline pl-5 ml-5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, state.email), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    name: \"password\",\n    className: \"d-inline pl-5 ml-5\",\n    type: \"password\",\n    value: state.password,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(\"h5\", {\n    className: \"d-inline\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"input\", {\n    name: \"confirmPassword\",\n    className: \"d-inline pl-5 ml-5\",\n    placeholder: \"Confirm Password\",\n    type: \"password\",\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }), React.createElement(\"small\", {\n    id: \"passwordHelpBlock\",\n    className: \"form-text text-muted\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, \"Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.\"), React.createElement(\"hr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    type: \"button\",\n    onClick: handleSubmit,\n    className: \"btn p-2 btn-primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"Update\")))));\n}","map":{"version":3,"sources":["C:/Users/pc/Desktop/project/oxotel-au3/oxotel/src/components/Profile.js"],"names":["React","useState","useEffect","updateProfile","Profile","state","updateState","edit","firstname","phoneNumber","email","password","confirmPassword","onEdit","changeHandler","e","name","target","value","localStorage","getItem","JSON","parse","alert","handleSubmit","validityCheck","profileData","console","log","stringify","username","message","length","checkPassword","str","re","test"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { updateProfile } from \"../api/api\"\r\n\r\nexport default function Profile() {\r\n\r\n    const [state, updateState] = useState({\r\n        edit: false,\r\n        firstname: \"\",\r\n        phoneNumber:\"\",\r\n        email: \"\",\r\n        password: \"\",\r\n        confirmPassword: \"\"\r\n    });\r\n\r\n    const onEdit = () => {\r\n        if (!state.edit) {\r\n            updateState({\r\n                ...state,\r\n                edit: true\r\n            });\r\n        } else {\r\n            updateState({\r\n                ...state,\r\n                edit: false\r\n            });\r\n        }\r\n    };\r\n\r\n    const changeHandler = e => {\r\n        const { name } = e.target;\r\n        updateState({\r\n            ...state,\r\n            [name]: e.target.value\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem(\"signupData\")) {\r\n            let name = JSON.parse(localStorage.getItem(\"signupData\")).name;\r\n            let phoneNumber = JSON.parse(localStorage.getItem(\"signupData\")).phoneNumber;\r\n            let password = JSON.parse(localStorage.getItem(\"signupData\")).password;\r\n            let email = JSON.parse(localStorage.getItem(\"signupData\")).email;\r\n\r\n            updateState({\r\n                name: name,\r\n                phoneNumber: phoneNumber,\r\n                password: password,\r\n                email: email\r\n            })\r\n        } else {\r\n            alert(\"User could not be created\");\r\n        }\r\n    }, [])\r\n\r\n\r\n    const handleSubmit = () => {\r\n        if (validityCheck()) {\r\n\r\n            const profileData = {\r\n                password: state.password,\r\n                name: state.name,\r\n            };\r\n\r\n            try {\r\n                console.log(\"Profile Data\", JSON.stringify(profileData))\r\n\r\n                let username = JSON.parse(localStorage.getItem(\"signupData\")).username;\r\n\r\n                updateProfile(profileData, username)\r\n                // window.location.reload();\r\n            } catch (e) {\r\n                console.log(e.message);\r\n            }\r\n        } else {\r\n            alert(\"Enter valid Details\");\r\n        }\r\n    };\r\n\r\n    const validityCheck = () => {\r\n        return (\r\n            state.name.length > 2 &&\r\n            state.password &&\r\n            state.confirmPassword &&\r\n            state.password === state.confirmPassword &&\r\n            checkPassword(state.password) &&\r\n            phoneNumber.length === 10 \r\n        );\r\n    };\r\n    const checkPassword = str => {\r\n        var re = /^(?=.*\\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/;\r\n        return re.test(str);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div className=\"container shadow-sm p-3 mb-5  bg-white mt-5 fullH rounded border\">\r\n                <h2>Profile</h2>\r\n                <h5 className=\"mb-5\">Basic info, for a faster booking experience</h5>\r\n                <div className=\"mb-4\">\r\n                    <h3 className=\"font-weight-bold\">\r\n                        Edit Profile{\" \"}\r\n                        <span onClick={onEdit}>\r\n                            <button className=\"btn btn-outline-dark\">&#9998;</button>\r\n                        </span>\r\n                    </h3>\r\n                </div>\r\n                <div className=\"\">\r\n                    {!state.edit ? (\r\n                        <div>\r\n                            <div>\r\n                                <h5 className=\"d-inline\">Name</h5>\r\n                                <h5 className=\"d-inline pl-5 ml-5\">{state.name}</h5>\r\n                                <hr />\r\n                            </div>\r\n                            <div>\r\n                                <h5 className=\"d-inline\">Phone Number </h5>\r\n                                <h5 className=\"d-inline pl-5 ml-5\">{state.phoneNumber}</h5>\r\n                                <hr />\r\n                            </div>\r\n                            <div>\r\n                                <h5 className=\"d-inline\">Email id</h5>\r\n                                <h5 className=\"d-inline pl-5 ml-5\">{state.email}</h5>\r\n                                <hr />\r\n                            </div>\r\n                            <div>\r\n                                <h5 className=\"d-inline\">Password</h5>\r\n                                <h5 className=\"d-inline pl-5 ml-5\">******</h5>\r\n                                <hr />\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                            <div>\r\n                                <div>\r\n                                    <h5 className=\"d-inline\">Name</h5>\r\n                                    <input\r\n                                        name=\"firstname\"\r\n                                        className=\"d-inline pl-5 ml-5\"\r\n                                        value={state.name}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                                    <hr />\r\n                                </div>\r\n                                <div>\r\n                                    <h5 className=\"d-inline\">Phone Number</h5>\r\n                                    <input\r\n                                        name=\"lastname\"\r\n                                        className=\"d-inline pl-5 ml-5\"\r\n                                        value={state.phoneNumber}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                                    <hr />\r\n                                </div>\r\n                                <div>\r\n                                    <h5 className=\"d-inline\">Email id</h5>\r\n                                    <h5 className=\"d-inline pl-5 ml-5\">{state.email}</h5>\r\n                                    <hr />\r\n                                </div>\r\n                                <div>\r\n                                    <h5 className=\"d-inline\">Password</h5>\r\n                                    <input\r\n                                        name=\"password\"\r\n                                        className=\"d-inline pl-5 ml-5\"\r\n                                        type=\"password\"\r\n                                        value={state.password}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                                    <hr />\r\n                                </div>\r\n                                <div>\r\n                                    <h5 className=\"d-inline\">Password</h5>\r\n                                    <input\r\n                                        name=\"confirmPassword\"\r\n                                        className=\"d-inline pl-5 ml-5\"\r\n                                        placeholder=\"Confirm Password\"\r\n                                        type=\"password\"\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                                    <small id=\"passwordHelpBlock\" className=\"form-text text-muted\">\r\n                                        Your password must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.\r\n                                    </small>\r\n                                    <hr />\r\n                                </div>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={handleSubmit}\r\n                                    className=\"btn p-2 btn-primary\"\r\n                                >\r\n                                    Update\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}