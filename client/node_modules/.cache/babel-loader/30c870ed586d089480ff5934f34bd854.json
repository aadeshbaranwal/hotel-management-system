{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\project\\\\oxotel-au3\\\\oxotel\\\\src\\\\data\\\\RoomData.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  }\n});\nexport default function BasicTable() {\n  const [state, updateState] = useState({\n    rows: [],\n    edit: false,\n    roomnumber: null,\n    roomtype: null,\n    roomfloor: null,\n    bedroom: null,\n    price: null,\n    booked: null\n  });\n  const classes = useStyles(); // let rows=[];\n\n  useEffect(() => {\n    fetch(\"http://localhost:5000/generate-report/rooms\").then(data => data.json()).then(response => {\n      console.log(response);\n      updateState({ ...state,\n        rows: response\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const handelDelete = data => {\n    console.log(\"delete room submit button\", data.target.value);\n    const reqData = {\n      roomnumber: data.target.value\n    };\n    fetch(`http://localhost:5000/generate-report/delete-room`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(reqData)\n    }).then(reqData => reqData.json()).then(response => {\n      console.log(\"delete room success \", response);\n\n      if (response) {\n        window.location.reload();\n      } else {\n        alert(\"Error while deleting room\");\n      }\n    }).catch(err => console.log(\"delete room error:\", err));\n  };\n\n  const handelUpdate = () => {\n    console.log(\"update room submit button\");\n    const data = {\n      roomnumber: state.roomnumber,\n      roomfloor: state.roomfloor,\n      roomtype: state.roomtype,\n      bedroom: state.bedroom,\n      price: state.price,\n      booked: state.booked\n    };\n    console.log(\"data:\", data);\n\n    if (!data.roomfloor.isInteger() || !data.price.isInteger() || !data.bedroom.isInteger() || !(data.booked === \"true\" || data.booked === \"false\")) {\n      alert(\"enter valid details\");\n      return;\n    }\n\n    console.log(\"inside handel update:\", data);\n    fetch(`http://localhost:5000/generate-report/update-room`, {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(data)\n    }).then(reqData => reqData.json()).then(response => {\n      console.log(\"update room success \", response);\n\n      if (response) {\n        alert(\"update successful!\");\n        window.location.reload();\n      }\n    }).catch(err => console.log(\"update room error:\", err));\n  };\n\n  const changeHandler = e => {\n    console.log(e.target);\n    const {\n      name\n    } = e.target;\n    updateState({ ...state,\n      [name]: e.target.value\n    });\n  };\n\n  const onEdit = data => {\n    console.log(\"inside onEdit\", data.target.value);\n\n    if (!state.edit) {\n      var result = state.rows.filter(rows => {\n        return rows.roomnumber === data.target.value;\n      });\n      console.log(\"result\", result[0]);\n      updateState({ ...state,\n        edit: true,\n        roomnumber: data.target.value,\n        bedroom: result[0].bedroom,\n        price: result[0].price,\n        booked: result[0].booked.toString()\n      });\n      console.log(state);\n    } else {\n      updateState({ ...state,\n        edit: false,\n        roomnumber: null\n      });\n    }\n  };\n\n  return React.createElement(TableContainer, {\n    component: Paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Room Number\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"Room Floor\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, \"Beds\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, \"Price\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, \"Booking Status\"), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, \" \"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, state.rows.map(row => state.edit && row.roomnumber === state.roomnumber ? React.createElement(TableRow, {\n    key: row.roomnumber,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"roomnumber\",\n    className: \"d-inline pl-5\",\n    value: row.roomnumber,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"roomfloor\",\n    className: \"d-inline pl-5 \",\n    placeholder: row.roomfloor,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"bedroom\",\n    className: \"d-inline pl-5\",\n    placeholder: row.bedroom,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"price\",\n    className: \"d-inline pl-5\",\n    placeholder: row.price,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"booked\",\n    className: \"d-inline pl-5\",\n    placeholder: row.booked.toString(),\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: handelUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, \"Confirm\")))) : React.createElement(TableRow, {\n    key: row.roomnumber,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, row.roomnumber), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, row.roomfloor), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, row.bedroom), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, row.price), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, row.booked.toString()), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    value: row.roomnumber,\n    className: \"btn btn-outline-dark\",\n    onClick: handelDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, \"\\uD83D\\uDDD1\")), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: onEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    value: row.roomnumber,\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, \"\\u270E\"))))))));\n}","map":{"version":3,"sources":["C:/Users/pc/Desktop/project/oxotel-au3/oxotel/src/data/RoomData.js"],"names":["React","useState","useEffect","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","useStyles","table","minWidth","BasicTable","state","updateState","rows","edit","roomnumber","roomtype","roomfloor","bedroom","price","booked","classes","fetch","then","data","json","response","console","log","catch","err","handelDelete","target","value","reqData","method","headers","body","JSON","stringify","window","location","reload","alert","handelUpdate","isInteger","changeHandler","e","name","onEdit","result","filter","toString","map","row"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\n\r\nexport default function BasicTable() {\r\n    const [state,updateState] = useState({\r\n      rows: [],\r\n      edit: false,\r\n      roomnumber: null,\r\n      roomtype: null,\r\n      roomfloor: null,\r\n      bedroom: null,\r\n      price: null,\r\n      booked: null\r\n    })\r\n    const classes = useStyles();\r\n\r\n    // let rows=[];\r\n\r\n    useEffect(() => {\r\n      fetch(\"http://localhost:5000/generate-report/rooms\")\r\n      .then((data) => data.json())\r\n      .then(response => {\r\n          console.log(response)\r\n          updateState({\r\n            ...state,\r\n            rows:response\r\n          });\r\n      })\r\n      .catch(err => {\r\n          console.log(err)\r\n      })\r\n    }, [])\r\n        \r\n    const handelDelete = data => {\r\n      console.log(\"delete room submit button\", data.target.value)\r\n      const reqData={\r\n        roomnumber: data.target.value\r\n      }\r\n        fetch(`http://localhost:5000/generate-report/delete-room`, {\r\n        method: 'DELETE',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify(reqData)\r\n        })\r\n        .then(reqData => reqData.json())\r\n        .then(response => {\r\n            console.log(\"delete room success \", response)\r\n            if(response){\r\n              window.location.reload()\r\n            }\r\n            else{\r\n              alert(\"Error while deleting room\");\r\n            }\r\n        })\r\n        .catch(err => \r\n            console.log(\"delete room error:\",err)\r\n        )\r\n    }\r\n\r\n    const handelUpdate = () => {\r\n      console.log(\"update room submit button\")\r\n\r\n      const data = {\r\n        roomnumber: state.roomnumber,\r\n        roomfloor: state.roomfloor,\r\n        roomtype: state.roomtype,\r\n        bedroom: state.bedroom,\r\n        price: state.price,\r\n        booked: state.booked\r\n      }\r\n\r\n      console.log(\"data:\",data)\r\n\r\n      if(!data.roomfloor.isInteger() || !data.price.isInteger() || !data.bedroom.isInteger() || !(data.booked === \"true\" || data.booked === \"false\")){\r\n        alert(\"enter valid details\")\r\n        return;\r\n      }\r\n\r\n      console.log(\"inside handel update:\", data)\r\n        fetch(`http://localhost:5000/generate-report/update-room`, {\r\n        method: 'PUT',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify(data)\r\n        })\r\n        .then(reqData => reqData.json())\r\n        .then(response => {\r\n            console.log(\"update room success \", response)\r\n            if(response){\r\n              alert(\"update successful!\")\r\n              window.location.reload()\r\n            }\r\n\r\n        })\r\n        .catch(err => \r\n            console.log(\"update room error:\",err)\r\n        )\r\n    }\r\n\r\n    const changeHandler = e => {\r\n      console.log(e.target)\r\n      const { name } = e.target;\r\n      updateState({\r\n          ...state,\r\n          [name]: e.target.value\r\n      });\r\n    };\r\n\r\n    const onEdit = (data) => {\r\n      console.log(\"inside onEdit\", data.target.value)\r\n      if (!state.edit) {\r\n        var result = state.rows.filter(rows => {\r\n          return rows.roomnumber === data.target.value\r\n        })\r\n        console.log(\"result\", result[0])\r\n        updateState({\r\n            ...state,\r\n            edit: true,\r\n            roomnumber: data.target.value,\r\n            bedroom: result[0].bedroom,\r\n            price: result[0].price,\r\n            booked: result[0].booked.toString()\r\n        });\r\n\r\n          console.log(state)\r\n      } else {\r\n          updateState({\r\n              ...state,\r\n              edit: false,\r\n              roomnumber: null,\r\n          });\r\n      }\r\n    };\r\n    \r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table className={classes.table} aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Room Number</TableCell>\r\n            {/* <TableCell >Room Type</TableCell> */}\r\n            <TableCell >Room Floor</TableCell>\r\n            <TableCell >Beds</TableCell>\r\n            <TableCell >Price</TableCell>\r\n            <TableCell >Booking Status</TableCell>\r\n            <TableCell> </TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        \r\n        <TableBody>\r\n             { state.rows.map((row) => (\r\n               state.edit && row.roomnumber === state.roomnumber ? (\r\n                    <TableRow key={row.roomnumber}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                        name=\"roomnumber\"\r\n                                        className=\"d-inline pl-5\"\r\n                                        value={row.roomnumber}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                      name=\"roomfloor\"\r\n                                      className=\"d-inline pl-5 \"\r\n                                      placeholder={row.roomfloor}\r\n                                      onChange={changeHandler}\r\n                                      required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                        name=\"bedroom\"\r\n                                        className=\"d-inline pl-5\"\r\n                                        placeholder={row.bedroom}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                        name=\"price\"\r\n                                        className=\"d-inline pl-5\"\r\n                                        placeholder={row.price}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                        name=\"booked\"\r\n                                        className=\"d-inline pl-5\"\r\n                                        placeholder={row.booked.toString()}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <span onClick={handelUpdate}>\r\n                                <button className=\"btn btn-outline-dark\">Confirm</button>\r\n                            </span>\r\n                        </TableCell>\r\n                    </TableRow>\r\n               ) : (\r\n                    <TableRow key={row.roomnumber}>\r\n                        <TableCell component=\"th\" scope=\"row\">{row.roomnumber}</TableCell>\r\n                        {/* <TableCell component=\"th\" scope=\"row\" >{row.roomtype}</TableCell> */}\r\n                        <TableCell>{row.roomfloor}</TableCell>\r\n                        <TableCell>{row.bedroom}</TableCell>\r\n                        <TableCell>{row.price}</TableCell>\r\n                        <TableCell>{row.booked.toString()}</TableCell>\r\n                        <TableCell>\r\n                            <button value={row.roomnumber} className=\"btn btn-outline-dark\" onClick={handelDelete}>&#128465;</button>\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <span onClick={onEdit}>\r\n                                <button value={row.roomnumber} className=\"btn btn-outline-dark\">&#9998;</button>\r\n                            </span>\r\n                        </TableCell>\r\n                    </TableRow>\r\n               )\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}