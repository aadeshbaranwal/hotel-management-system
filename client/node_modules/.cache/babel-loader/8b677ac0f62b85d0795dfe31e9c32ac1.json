{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\project\\\\oxotel-au3\\\\oxotel\\\\src\\\\components\\\\Login.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { getuser, verifyLoginDetails } from \"../api/api\";\nimport { useDispatch } from \"react-redux\"; // import { Link } from \"react-router-dom\";\n\nconst Login = props => {\n  const [state, setState] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  useEffect(() => {\n    getuser();\n    console.log(\"mounted\");\n  }, []);\n  const history = useHistory();\n  const dispatch = useDispatch();\n\n  const handleChange = e => {\n    // console.log(e.target.value)\n    const {\n      name,\n      value\n    } = e.target;\n    setState({ ...state,\n      [name]: value\n    });\n  };\n\n  const login = async () => {\n    // console.log(\"hello\")\n    // if(emailValidity()){\n    //     alert(\"Login Id invalid!\")\n    //     return;\n    // }\n    if (emailValidity() && state.password) {\n      try {\n        let data = {\n          email: state.email,\n          password: state.password\n        };\n        console.log(props);\n        let res = await verifyLoginDetails(history, data, dispatch, props);\n        console.log(res); // if(res)\n\n        props.handleClose(); // history.push(\"/test\");\n      } catch (e) {\n        console.log(e.message);\n        alert(\"Email and password did not match\");\n      }\n    } else {\n      alert(\"Enter valid email address and password\");\n    }\n  };\n\n  const emailValidity = () => {\n    return state.email && state.email.includes(\"@\") && state.email.includes(\".\");\n  }; // const { email, password } = state;\n\n\n  return React.createElement(\"div\", {\n    className: \"login-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    className: \"text-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"div\", {\n    className: \"form-group input-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \" \", React.createElement(\"i\", {\n    className: \"fa fa-envelope\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), \" \")), React.createElement(\"input\", {\n    id: \"eml\",\n    name: \"email\",\n    className: \"form-control\",\n    placeholder: \"Email address\",\n    type: \"email\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group input-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"input-group-prepend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \" \", React.createElement(\"i\", {\n    className: \"fa fa-lock\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), \" \")), React.createElement(\"input\", {\n    id: \"psw\",\n    name: \"password\",\n    className: \"form-control\",\n    placeholder: \"Enter password\",\n    type: \"password\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: login,\n    className: \"btn btn-primary login-btn btn-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }, \"Sign in\"))), React.createElement(\"p\", {\n    className: \"text-center text-muted small pt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }, \"Don't have an account?\", \" \", React.createElement(Link, {\n    to: \"#\",\n    onClick: props.handleSave,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }, \"Sign up here!\")));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/pc/Desktop/project/oxotel-au3/oxotel/src/components/Login.js"],"names":["React","useState","useEffect","useHistory","Link","getuser","verifyLoginDetails","useDispatch","Login","props","state","setState","email","password","console","log","history","dispatch","handleChange","e","name","value","target","login","emailValidity","data","res","handleClose","message","alert","includes","handleSave"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory, Link } from \"react-router-dom\";\r\nimport { getuser, verifyLoginDetails } from \"../api/api\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\n\r\n// import { Link } from \"react-router-dom\";\r\n\r\nconst Login = props => {\r\n    const [state, setState] = useState({\r\n        email: \"\",\r\n        password: \"\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        getuser();\r\n        console.log(\"mounted\")\r\n    }, [])\r\n\r\n    const history = useHistory();\r\n\r\n    const dispatch = useDispatch();\r\n\r\n\r\n    const handleChange = e => {\r\n        // console.log(e.target.value)\r\n        const { name, value } = e.target;\r\n        setState({ ...state, [name]: value });\r\n    };\r\n\r\n    const login = async () => {\r\n        // console.log(\"hello\")\r\n        // if(emailValidity()){\r\n        //     alert(\"Login Id invalid!\")\r\n        //     return;\r\n        // }\r\n\r\n        if (emailValidity() && state.password) {\r\n            try {\r\n                let data = {\r\n                    email: state.email,\r\n                    password: state.password\r\n                }\r\n\r\n                console.log(props)\r\n\r\n                let res = await verifyLoginDetails(history, data, dispatch, props)\r\n                console.log(res)\r\n                // if(res)\r\n                    props.handleClose()\r\n                // history.push(\"/test\");\r\n\r\n            } catch (e) {\r\n                console.log(e.message);\r\n                alert(\"Email and password did not match\");\r\n            }\r\n        } else {\r\n            alert(\"Enter valid email address and password\");\r\n        }\r\n    };\r\n\r\n    const emailValidity = () => {\r\n        return (\r\n            state.email && state.email.includes(\"@\") && state.email.includes(\".\")\r\n        );\r\n    };\r\n\r\n    // const { email, password } = state;\r\n    return (\r\n        <div className=\"login-form\">\r\n            <form>\r\n                <h2 className=\"text-center\">Login</h2>\r\n                <div className=\"form-group input-group\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <span className=\"input-group-text\">\r\n                            {\" \"}\r\n                            <i className=\"fa fa-envelope\" />{\" \"}\r\n                        </span>\r\n                    </div>\r\n                    <input\r\n                        id=\"eml\"\r\n                        name=\"email\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"Email address\"\r\n                        type=\"email\"\r\n                        onChange={handleChange}\r\n                    />\r\n                </div>\r\n                <div className=\"form-group input-group\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <span className=\"input-group-text\">\r\n                            {\" \"}\r\n                            <i className=\"fa fa-lock\" />{\" \"}\r\n                        </span>\r\n                    </div>\r\n                    <input\r\n                        id=\"psw\"\r\n                        name=\"password\"\r\n                        className=\"form-control\"\r\n                        placeholder=\"Enter password\"\r\n                        type=\"password\"\r\n                        onChange={handleChange}\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <button onClick={login} className=\"btn btn-primary login-btn btn-block\">\r\n                        Sign in\r\n                    </button>\r\n                </div>\r\n                {/* <div className=\"or-seperator text-center\">\r\n                    <i>or</i>\r\n                </div> */}\r\n                {/* <p className=\"text-center\">Login with your social media account</p> */}\r\n                {/* <div className=\"text-center social-btn\">\r\n                    <Link to=\"#\" className=\"btn btn-primary\">\r\n                        <i className=\"fa fa-facebook\" />\r\n                        &nbsp; Facebook\r\n                    </Link>\r\n                    <Link to=\"#\" className=\"btn btn-danger ml-3\">\r\n                        <i className=\"fa fa-google\" />\r\n                        &nbsp; Google\r\n          </Link>\r\n                </div> */}\r\n            </form>\r\n            <p className=\"text-center text-muted small pt-2\">\r\n                Don't have an account?{\" \"}\r\n                <Link to=\"#\" onClick={props.handleSave}>\r\n                    Sign up here!\r\n                </Link>\r\n            </p>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}