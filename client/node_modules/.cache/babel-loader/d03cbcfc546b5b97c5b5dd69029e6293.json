{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\project\\\\oxotel-au3\\\\oxotel\\\\src\\\\data\\\\UsersData.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { updateProfile } from '../api/api';\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  }\n}); // let rows = [];\n\nexport default function BasicTable() {\n  const [state, updateState] = useState({\n    rows: [],\n    edit: false,\n    username: null,\n    phoneNUmber: null,\n    name: null,\n    email: null\n  });\n  const classes = useStyles(); // let rows=[];\n\n  useEffect(() => {\n    fetch(\"http://localhost:5000/generate-report/users\").then(data => data.json()).then(response => {\n      updateState({ ...state,\n        rows: response\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const handleDelete = data => {\n    console.log(\"delete user submit button\", data.target.value);\n    const reqData = {\n      username: data.target.value\n    };\n    fetch(`http://localhost:5000/generate-report/delete-user`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(reqData)\n    }).then(reqData => reqData.json()).then(response => {\n      console.log(\"delete user success \", response);\n\n      if (response) {\n        window.location.reload();\n      }\n    }).catch(err => console.log(\"delete user error:\", err));\n  };\n\n  const handelUpdate = () => {\n    console.log(\"update room submit button\");\n    const data = {\n      username: state.username,\n      name: state.namer,\n      email: state.email,\n      phoneNumber: state.phoneNumber\n    };\n    console.log(\"inside handel update:\", data); // fetch(`http://localhost:5000/generate-report/update-room`, {\n    // method: 'PUT',\n    // headers: {'Content-Type':'application/json'},\n    // body: JSON.stringify(data)\n    // })\n    // .then(reqData => reqData.json())\n    // .then(response => {\n    //     console.log(\"update room success \", response)\n    //     // if(response){\n    //     //   window.location.reload()\n    //     // }\n    // })\n    // .catch(err => \n    //     console.log(\"update room error:\",err)\n    // )\n\n    try {\n      const status = updateProfile(data, data.username);\n\n      if (status) {\n        window.location.reload();\n      }\n    } catch (e) {\n      console.log(\"error:\", e);\n    }\n  };\n\n  const changeHandler = e => {\n    console.log(e.target);\n    const {\n      name\n    } = e.target;\n    updateState({ ...state,\n      [name]: e.target.value\n    });\n  };\n\n  const onEdit = data => {\n    console.log(\"inside onEdit\", data.target.value);\n\n    if (!state.edit) {\n      updateState({ ...state,\n        edit: true,\n        username: data.target.value\n      });\n      console.log(state.username);\n    } else {\n      updateState({ ...state,\n        edit: false,\n        username: null\n      });\n    }\n  };\n\n  return React.createElement(TableContainer, {\n    component: Paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"Name\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Username\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, \"Email\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, \"Phone Number\"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, state.rows.map(row => state.edit && row.username === state.username ? React.createElement(TableRow, {\n    key: row.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"name\",\n    className: \"d-inline pl-5\",\n    value: row.name,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"username\",\n    className: \"d-inline pl-5 \" // value={row.roomtype}\n    ,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"email\",\n    className: \"d-inline pl-5 \" // value={row.roomfloor}\n    ,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"phoneNumber\",\n    className: \"d-inline pl-5 \" // value={row.roomfloor}\n    ,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: handelUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, \"Confirm\")))) : row.username !== \"admin\" && React.createElement(TableRow, {\n    key: row.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, row.name), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, row.username), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }, row.email), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, row.phoneNumber), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    value: row.username,\n    onClick: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, \"Delete\")), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: onEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    value: row.roomnumber,\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, \"\\u270E\"))))))));\n}","map":{"version":3,"sources":["C:/Users/pc/Desktop/project/oxotel-au3/oxotel/src/data/UsersData.js"],"names":["React","useState","useEffect","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","updateProfile","useStyles","table","minWidth","BasicTable","state","updateState","rows","edit","username","phoneNUmber","name","email","classes","fetch","then","data","json","response","catch","err","console","log","handleDelete","target","value","reqData","method","headers","body","JSON","stringify","window","location","reload","handelUpdate","namer","phoneNumber","status","e","changeHandler","onEdit","map","row","roomnumber"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {updateProfile} from '../api/api'\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\n\r\n// let rows = [];\r\n\r\nexport default function BasicTable() {\r\n    const [state,updateState]=useState({\r\n      rows:[],\r\n      edit: false,\r\n      username: null,\r\n      phoneNUmber: null,\r\n      name: null,\r\n      email: null\r\n    })\r\n    const classes = useStyles();\r\n\r\n    // let rows=[];\r\n    useEffect(() => {\r\n      fetch(\"http://localhost:5000/generate-report/users\")\r\n        .then((data) => data.json())\r\n        .then(response => {\r\n            updateState({\r\n              ...state,\r\n              rows:response\r\n            });\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }, [])\r\n        \r\n    \r\n    const handleDelete = data => {\r\n        console.log(\"delete user submit button\", data.target.value)\r\n        const reqData = {\r\n          username: data.target.value\r\n        }\r\n        fetch(`http://localhost:5000/generate-report/delete-user`, {\r\n        method: 'DELETE',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify(reqData)\r\n        })\r\n        .then(reqData => reqData.json())\r\n        .then(response => {\r\n            console.log(\"delete user success \", response)\r\n            if(response){\r\n              window.location.reload()\r\n            }\r\n\r\n        })\r\n        .catch(err => \r\n            console.log(\"delete user error:\",err)\r\n        )\r\n    }\r\n\r\n    const handelUpdate = () => {\r\n      console.log(\"update room submit button\")\r\n      const data = {\r\n        username: state.username,\r\n        name: state.namer,\r\n        email: state.email,\r\n        phoneNumber: state.phoneNumber\r\n      }\r\n\r\n      console.log(\"inside handel update:\", data)\r\n        // fetch(`http://localhost:5000/generate-report/update-room`, {\r\n        // method: 'PUT',\r\n        // headers: {'Content-Type':'application/json'},\r\n        // body: JSON.stringify(data)\r\n        // })\r\n        // .then(reqData => reqData.json())\r\n        // .then(response => {\r\n        //     console.log(\"update room success \", response)\r\n        //     // if(response){\r\n        //     //   window.location.reload()\r\n        //     // }\r\n\r\n        // })\r\n        // .catch(err => \r\n        //     console.log(\"update room error:\",err)\r\n        // )\r\n      try{\r\n        const status = updateProfile(data,data.username)\r\n\r\n        if(status){\r\n          window.location.reload()\r\n        }\r\n      }\r\n      catch(e) {\r\n        console.log(\"error:\", e)\r\n      }\r\n      \r\n    }\r\n\r\n    const changeHandler = e => {\r\n      console.log(e.target)\r\n      const { name } = e.target;\r\n      updateState({\r\n          ...state,\r\n          [name]: e.target.value\r\n      });\r\n    };\r\n\r\n    const onEdit = (data) => {\r\n      console.log(\"inside onEdit\", data.target.value)\r\n      if (!state.edit) {\r\n          updateState({\r\n              ...state,\r\n              edit: true,\r\n              username: data.target.value,\r\n          });\r\n\r\n          console.log(state.username)\r\n      } else {\r\n          updateState({\r\n              ...state,\r\n              edit: false,\r\n              username: null,\r\n          });\r\n      }\r\n    };\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table className={classes.table} aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Name</TableCell>\r\n            <TableCell align=\"right\">Username</TableCell>\r\n            <TableCell align=\"right\">Email</TableCell>\r\n            <TableCell align=\"right\">Phone Number</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        \r\n        <TableBody>\r\n             { state.rows.map((row) => (\r\n              state.edit && row.username === state.username ? (\r\n                    <TableRow key={row.username}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                        name=\"name\"\r\n                                        className=\"d-inline pl-5\"\r\n                                        value={row.name}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\" >\r\n                                    <input\r\n                                        name=\"username\"\r\n                                        className=\"d-inline pl-5 \"\r\n                                        // value={row.roomtype}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                                    <input\r\n                                      name=\"email\"\r\n                                      className=\"d-inline pl-5 \"\r\n                                      // value={row.roomfloor}\r\n                                      onChange={changeHandler}\r\n                                      required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                                    <input\r\n                                      name=\"phoneNumber\"\r\n                                      className=\"d-inline pl-5 \"\r\n                                      // value={row.roomfloor}\r\n                                      onChange={changeHandler}\r\n                                      required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <span onClick={handelUpdate}>\r\n                                <button className=\"btn btn-outline-dark\">Confirm</button>\r\n                            </span>\r\n                        </TableCell>\r\n                    </TableRow>\r\n               ) :(\r\n                 row.username!==\"admin\" &&\r\n                    <TableRow key={row.name}>\r\n                        <TableCell component=\"th\" scope=\"row\">{row.name}</TableCell>\r\n                        <TableCell align=\"right\">{row.username}</TableCell>\r\n                        <TableCell align=\"right\">{row.email}</TableCell>\r\n                        <TableCell align=\"right\">{row.phoneNumber}</TableCell>\r\n                        <TableCell><button value={row.username} onClick={handleDelete}>Delete</button></TableCell>\r\n                        <TableCell>\r\n                            <span onClick={onEdit}>\r\n                                <button value={row.roomnumber} className=\"btn btn-outline-dark\">&#9998;</button>\r\n                            </span>\r\n                        </TableCell>\r\n                    </TableRow>\r\n               )\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}