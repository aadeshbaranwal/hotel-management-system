{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pc\\\\Desktop\\\\project\\\\oxotel-au3\\\\oxotel\\\\src\\\\data\\\\UsersData.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { updateProfile } from '../api/api';\nconst useStyles = makeStyles({\n  table: {\n    minWidth: 650\n  }\n}); // let rows = [];\n\nexport default function BasicTable() {\n  const [state, updateState] = useState({\n    rows: [],\n    edit: false,\n    username: \"\",\n    phoneNumber: \"\",\n    name: \"\",\n    email: \"\"\n  });\n  const classes = useStyles(); // let rows=[];\n\n  useEffect(() => {\n    fetch(\"http://localhost:5000/generate-report/users\").then(data => data.json()).then(response => {\n      updateState({ ...state,\n        rows: response\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const handleDelete = data => {\n    console.log(\"delete user submit button\", data.target.value);\n    const reqData = {\n      username: data.target.value\n    };\n    fetch(`http://localhost:5000/generate-report/delete-user`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(reqData)\n    }).then(reqData => reqData.json()).then(response => {\n      console.log(\"delete user success \", response);\n\n      if (response) {\n        window.location.reload();\n      }\n    }).catch(err => console.log(\"delete user error:\", err));\n  };\n\n  const handelUpdate = () => {\n    console.log(\"update room submit button\");\n    const data = {\n      username: state.username,\n      name: state.name,\n      email: state.email,\n      phoneNumber: state.phoneNumber\n    };\n\n    function allLetter(word) {\n      //   var letters = /^[A-Za-z]+$/;\n      if (/^[a-zA-Z\\s]*$/.test(word)) return true; // alert(\"enter name correctly\")\n\n      return false;\n    }\n\n    const Validity = () => {\n      return data.name.length > 2 && allLetter(data.name) && data.email && data.email.includes(\"@\") && data.email.includes(\".\") && data.phoneNumber.length === 10;\n    };\n\n    if (!Validity()) {\n      alert(\"Enter valid details!\");\n      return;\n    }\n\n    console.log(\"inside handel update:\", data);\n\n    try {\n      fetch(`http://localhost:5000/generate-report/update-user`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(reqData => reqData.json()).then(response => {\n        console.log(\"update user success \", response);\n\n        if (response) {\n          alert(\"update successful!\");\n          window.location.reload();\n        }\n      }).catch(err => console.log(\"update user error:\", err)); // window.location.reload()\n    } catch (e) {\n      console.log(\"error:\", e);\n    }\n  };\n\n  const changeHandler = e => {\n    console.log(e.target);\n    const {\n      name\n    } = e.target;\n    updateState({ ...state,\n      [name]: e.target.value\n    });\n  };\n\n  const onEdit = data => {\n    console.log(\"inside onEdit\", data.target);\n    const user = data.target.value;\n\n    if (!state.edit) {\n      updateState({ ...state,\n        edit: true,\n        username: data.target.value,\n        email: state.rows.find(o => o.username === user).email,\n        phoneNumber: state.rows.find(o => o.username === user).phoneNumber,\n        name: state.rows.find(o => o.username === user).name\n      });\n    } else {\n      updateState({ ...state,\n        edit: false,\n        username: null\n      });\n    }\n  };\n\n  return React.createElement(TableContainer, {\n    component: Paper,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, console.log(state), React.createElement(Table, {\n    className: classes.table,\n    \"aria-label\": \"simple table\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(TableHead, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, React.createElement(TableRow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170\n    },\n    __self: this\n  }, \"Name\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, \"Username\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"Email\"), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, \"Phone Number\"))), React.createElement(TableBody, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, state.rows.map(row => state.edit && row.username === state.username ? React.createElement(TableRow, {\n    key: row.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"name\",\n    className: \"d-inline pl-5\",\n    placeholder: row.name,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"username\",\n    className: \"d-inline pl-5 \",\n    value: row.username,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"email\",\n    className: \"d-inline pl-4\",\n    placeholder: row.email,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"phoneNumber\",\n    type: \"number\",\n    className: \"d-inline pl-5 \",\n    placeholder: row.phoneNumber,\n    onChange: changeHandler,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  })), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: handelUpdate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, \"Confirm\")))) : row.username !== \"admin\" && React.createElement(TableRow, {\n    key: row.username,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, React.createElement(TableCell, {\n    component: \"th\",\n    scope: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, row.name), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }, row.username), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, row.email), React.createElement(TableCell, {\n    align: \"right\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, row.phoneNumber), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    value: row.username,\n    className: \"btn btn-outline-dark\",\n    onClick: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, \"\\uD83D\\uDDD1\")), React.createElement(TableCell, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    onClick: onEdit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    value: row.username,\n    className: \"btn btn-outline-dark\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, \"\\u270E\"))))))));\n}","map":{"version":3,"sources":["C:/Users/pc/Desktop/project/oxotel-au3/oxotel/src/data/UsersData.js"],"names":["React","useState","useEffect","makeStyles","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","updateProfile","useStyles","table","minWidth","BasicTable","state","updateState","rows","edit","username","phoneNumber","name","email","classes","fetch","then","data","json","response","catch","err","console","log","handleDelete","target","value","reqData","method","headers","body","JSON","stringify","window","location","reload","handelUpdate","allLetter","word","test","Validity","length","includes","alert","e","changeHandler","onEdit","user","find","o","map","row"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport {updateProfile} from '../api/api'\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 650,\r\n  },\r\n});\r\n\r\n// let rows = [];\r\n\r\nexport default function BasicTable() {\r\n    const [state,updateState]=useState({\r\n      rows:[],\r\n      edit: false,\r\n      username: \"\",\r\n      phoneNumber: \"\",\r\n      name: \"\",\r\n      email: \"\"\r\n    })\r\n    const classes = useStyles();\r\n\r\n    // let rows=[];\r\n    useEffect(() => {\r\n      fetch(\"http://localhost:5000/generate-report/users\")\r\n        .then((data) => data.json())\r\n        .then(response => {\r\n            updateState({\r\n              ...state,\r\n              rows:response\r\n            });\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }, [])\r\n        \r\n    \r\n    const handleDelete = data => {\r\n        console.log(\"delete user submit button\", data.target.value)\r\n        const reqData = {\r\n          username: data.target.value\r\n        }\r\n        fetch(`http://localhost:5000/generate-report/delete-user`, {\r\n        method: 'DELETE',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify(reqData)\r\n        })\r\n        .then(reqData => reqData.json())\r\n        .then(response => {\r\n            console.log(\"delete user success \", response)\r\n            if(response){\r\n              window.location.reload()\r\n            }\r\n\r\n        })\r\n        .catch(err => \r\n            console.log(\"delete user error:\",err)\r\n        )\r\n    }\r\n\r\n    const handelUpdate = () => {\r\n      console.log(\"update room submit button\")\r\n      const data = {\r\n        username: state.username,\r\n        name: state.name,\r\n        email: state.email,\r\n        phoneNumber: state.phoneNumber\r\n      }\r\n\r\n      function allLetter(word)\r\n      { \r\n      //   var letters = /^[A-Za-z]+$/;\r\n        if (/^[a-zA-Z\\s]*$/.test(word))\r\n          return true;\r\n        // alert(\"enter name correctly\")\r\n        return false;\r\n      }\r\n\r\n      const Validity = () => {\r\n        return (\r\n          data.name.length > 2 &&\r\n          allLetter(data.name) &&\r\n          data.email &&\r\n          data.email.includes(\"@\") &&\r\n          data.email.includes(\".\") &&\r\n          data.phoneNumber.length === 10\r\n        );\r\n      };\r\n\r\n      if (!Validity()) {\r\n        alert(\"Enter valid details!\");\r\n        return;\r\n      } \r\n      console.log(\"inside handel update:\", data)\r\n        \r\n      try{\r\n        fetch(`http://localhost:5000/generate-report/update-user`, {\r\n        method: 'PUT',\r\n        headers: {'Content-Type':'application/json'},\r\n        body: JSON.stringify(data)\r\n        })\r\n        .then(reqData => reqData.json())\r\n        .then(response => {\r\n            console.log(\"update user success \", response)\r\n            if(response){\r\n              alert(\"update successful!\")\r\n              window.location.reload()\r\n            }\r\n\r\n        })\r\n        .catch(err => \r\n            console.log(\"update user error:\",err)\r\n        )\r\n\r\n\r\n        // window.location.reload()\r\n      }\r\n      catch(e) {\r\n        console.log(\"error:\", e)\r\n      }\r\n      \r\n    }\r\n\r\n    const changeHandler = e => {\r\n      console.log(e.target)\r\n      const { name } = e.target;\r\n      updateState({\r\n          ...state,\r\n          [name]: e.target.value\r\n      });\r\n    };\r\n\r\n    const onEdit = (data) => {\r\n      console.log(\"inside onEdit\", data.target)\r\n      const user = data.target.value\r\n      if (!state.edit) {\r\n          updateState({\r\n              ...state,\r\n              edit: true,\r\n              username: data.target.value,\r\n              email: state.rows.find(o => o.username === user).email,\r\n              phoneNumber: state.rows.find(o => o.username === user).phoneNumber,\r\n              name: state.rows.find(o => o.username === user).name\r\n          });\r\n\r\n      } else {\r\n          updateState({\r\n              ...state,\r\n              edit: false,\r\n              username: null,\r\n          });\r\n      }\r\n    };\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n        {console.log(state)}\r\n      <Table className={classes.table} aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Name</TableCell>\r\n            <TableCell align=\"right\">Username</TableCell>\r\n            <TableCell align=\"right\">Email</TableCell>\r\n            <TableCell align=\"right\">Phone Number</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        \r\n        <TableBody>\r\n             { state.rows.map((row) => (\r\n              state.edit &&  row.username === state.username ? (\r\n                    <TableRow key={row.username}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                        name=\"name\"\r\n                                        className=\"d-inline pl-5\"\r\n                                        placeholder={row.name}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\" >\r\n                                    <input\r\n                                        name=\"username\"\r\n                                        className=\"d-inline pl-5 \"\r\n                                        value={row.username}\r\n                                        onChange={changeHandler}\r\n                                        required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                      name=\"email\"\r\n                                      className=\"d-inline pl-4\"\r\n                                      placeholder={row.email}\r\n                                      onChange={changeHandler}\r\n                                      required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                                    <input\r\n                                      name=\"phoneNumber\"\r\n                                      type=\"number\"\r\n                                      className=\"d-inline pl-5 \"\r\n                                      placeholder={row.phoneNumber}\r\n                                      onChange={changeHandler}\r\n                                      required\r\n                                    />\r\n                        </TableCell>\r\n                        <TableCell>\r\n                            <span onClick={handelUpdate}>\r\n                                <button className=\"btn btn-outline-dark\">Confirm</button>\r\n                            </span>\r\n                        </TableCell>\r\n                    </TableRow>\r\n               ) : (\r\n                 row.username !== \"admin\" &&\r\n                    <TableRow key={row.username}>\r\n                        <TableCell component=\"th\" scope=\"row\">{row.name}</TableCell>\r\n                        <TableCell align=\"right\">{row.username}</TableCell>\r\n                        <TableCell align=\"right\">{row.email}</TableCell>\r\n                        <TableCell align=\"right\">{row.phoneNumber}</TableCell>\r\n                        <TableCell><button value={row.username} className=\"btn btn-outline-dark\" onClick={handleDelete}>&#128465;</button></TableCell>\r\n                        <TableCell>\r\n                            <span onClick={onEdit}>\r\n                                <button value={row.username} className=\"btn btn-outline-dark\">&#9998;</button>\r\n                            </span>\r\n                        </TableCell>\r\n                    </TableRow>\r\n               )\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}